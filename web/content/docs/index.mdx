---
title: Getting Started with tSQL
description: Learn how to set up and use tSQL, a type-safe SQL query builder for TypeScript.
icon: Album
---

## Introduction

tSQL is a type-safe SQL query builder and database toolkit for TypeScript.

```ts
const users = await db
  .selectFrom("users")
  .select(["id", "name", "email"])
  .execute();

// users is now typed as { id: number; name: string; email: string }[]
```

## Features

- Fully type-safe SQL query builder with a fluent API
- Automatic type generation from your database schema
- Database migrations support
- Transaction handling
- Written entirely in TypeScript with full type safety

## Prerequisites

Before getting started with tSQL, make sure you have:

1.  Node.js (e.g., version 18.x or later recommended) installed.
2.  [TypeScript](https://www.typescriptlang.org/) (version 4.6 or later) installed in your project.
3.  TypeScript's [strict mode](https://www.typescriptlang.org/tsconfig/#strict) enabled in your `tsconfig.json` for the best type-safety experience.

## Getting Started

Follow these steps to get started with tSQL:

### 1. Install tSQL and Necessary Packages

You'll need `tsql` itself, a database driver (like `pg` for PostgreSQL), and potentially `kysely` if you plan to use plugins like `CamelCasePlugin` directly from it.

```package-install
tsql pg kysely
```

### 2. Generate Types

First, let's assume you have a `posts` table in your database (e.g., PostgreSQL) with the following schema:

```sql title="Database Schema (e.g., PostgreSQL)"
create table posts (
  id serial primary key,
  title text not null,
  content text not null,
  published_at timestamptz default current_timestamp,
  updated_at timestamptz default current_timestamp
);
```

Now, generate TypeScript types from your database schema using the tSQL CLI. This step is crucial for leveraging tSQL's type safety. The `--camel-case` flag will ensure that snake_case column names (like `published_at`) are converted to camelCase (like `publishedAt`) in your generated types.

```bash title="Generate types from database"
npx tsql codegen --url postgres://user:password@localhost/db_name --dialect postgres --output src/db.d.ts --camel-case
```

Replace `postgres://user:password@localhost/db_name` with your actual database connection string.

You can also add this to your `package.json` as a script for convenience:

```json title="package.json"
{
  "scripts": {
    "db:codegen": "tsql codegen --url postgres://user:password@localhost/db_name --dialect postgres --output src/db.d.ts --camel-case"
  }
}
```

Then run it:

```package-install
npm run db:codegen
```

This command will generate type definitions for your database schema in the specified output file (e.g., `src/db.d.ts`):

```ts title="src/db.d.ts (Example)"
// This is an example of what might be generated.
// Actual output depends on your schema and the codegen tool.
export interface Posts {
  id: number;
  title: string;
  content: string;
  publishedAt: Date; // Generated as camelCase
  updatedAt: Date; // Generated as camelCase
}

export interface Database {
  posts: Posts;
  // ... other tables in your database
}
```

### 3. Connect and Query Your Database

Once you have your types generated, you can import them and connect to your database to start writing type-safe queries. The example below uses PostgreSQL.

```ts title="src/app.ts (Example)"
import { createTSQL, PostgresDialect } from "tsql";
import { CamelCasePlugin } from "kysely"; // tSQL can leverage Kysely plugins
import type { Database } from "./db"; // Import the generated Database interface (path relative to this file)
import { Pool } from "pg"; // PostgreSQL driver

// Create a Postgres connection pool
const pool = new Pool({
  host: "localhost",
  database: "my_db", // Replace with your database name
  user: "postgres", // Replace with your username
  password: "password", // Replace with your password
  // port: 5432,        // Default Postgres port
});

// Create a tSQL instance
const db = createTSQL<Database>({
  dialect: new PostgresDialect({
    pool,
  }),
  plugins: [
    new CamelCasePlugin(), // Automatically converts snake_case columns to camelCase properties
  ],
});

async function main() {
  // Example: Select recent posts
  const recentPosts = await db
    .selectFrom("posts")
    .select(["id", "title", "publishedAt"]) // Type-safe selection
    .orderBy("publishedAt", "desc")
    .limit(10)
    .execute();

  for (const post of recentPosts) {
    // `post.publishedAt` is a Date object and `post.title` is a string
    console.log(
      `Post ID: ${post.id}, Title: ${
        post.title
      }, Published: ${post.publishedAt.toDateString()}`
    );
  }

  // Clean up resources when your application is shutting down
  // The specific method might depend on your application structure and tSQL version
  await db.destroy(); // Kysely instances often have a destroy method
}

main().catch((error) => {
  console.error("An error occurred:", error);
  process.exit(1);
});
```

Adjust the import path `import type { Database } from "./db";` based on the location of your `db.d.ts` file relative to where you're writing your queries.

## Dialects

tSQL supports multiple SQL databases through dialects, building upon Kysely's robust dialect system. The "Connect and Query" example above uses `PostgresDialect`. To work with other databases like MySQL, Microsoft SQL Server (MSSQL), or SQLite, you would use their respective dialects (e.g., `MysqlDialect`, `MssqlDialect`, `SqliteDialect` â€“ typically available from the `tsql` package or as peer Kysely dialects) and install the necessary database drivers.

For instance, to use MySQL, you would first install the `mysql2` driver:

```package-install
mysql2
```

And then configure your `tsql` instance similarly:

```ts title="src/app.ts (MySQL Example)"
import { createTSQL, MysqlDialect } from "tsql"; // Assuming MysqlDialect from tsql
import { CamelCasePlugin } from "kysely";
import type { Database } from "./db"; // Your generated database types
import { createPool } from "mysql2"; // MySQL2 driver

const pool = createPool({
  host: "localhost",
  database: "my_mysql_db",
  user: "mysql_user",
  password: "password",
  connectionLimit: 10,
});

const db = createTSQL<Database>({
  dialect: new MysqlDialect({
    pool,
  }),
  plugins: [new CamelCasePlugin()],
});

// ... your application logic using db ...
```

Always refer to the specific documentation for each dialect and driver for detailed configuration options.

## Contributions

tSQL builds upon the excellent work of the following open-source projects:

- [Kysely](https://github.com/kysely-org/kysely): A type-safe SQL query builder for TypeScript.
- [kysely-codegen](https://github.com/RobinBlomberg/kysely-codegen): A code generator for Kysely.

We are grateful to the maintainers and contributors of these projects.

## License

MIT
